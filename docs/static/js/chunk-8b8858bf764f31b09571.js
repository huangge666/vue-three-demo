"use strict";(self.webpackChunkmy_webpack_vue=self.webpackChunkmy_webpack_vue||[]).push([[977],{1968:(e,t,i)=>{i.r(t),i.d(t,{default:()=>v});var n=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{ref:"three",staticClass:"three-container",style:{filter:e.dialogVisible?"blur(10px)":""},attrs:{id:"container"}},[n("div",{staticClass:"title"},[n("div",{staticClass:"content"},[n("div",{staticClass:"_title"},[e._v(e._s(e.modelText.title))]),e._v(" "),e.showTip?e._e():n("div",[n("img",{staticClass:"pointer",attrs:{src:i(693),alt:""},on:{click:function(t){e.showTip=!0}}})]),e._v(" "),e.showTip?n("div",[n("div",{staticClass:"_sub-title"},[e._v(e._s(e.modelText.subTitle))]),e._v(" "),n("div",[n("img",{staticClass:"pointer",attrs:{src:i(9389),alt:""},on:{click:function(t){e.showTip=!1}}})])]):e._e()])]),e._v(" "),e._m(0),e._v(" "),n("div",{staticClass:"action"},[n("img",{staticClass:"auto-icon",attrs:{src:i(4828),alt:""},on:{click:function(t){return e.modelAuto()}}}),e._v(" "),n("img",{staticClass:"help-icon",attrs:{src:i(3421),alt:""},on:{click:function(t){e.dialogVisible=!0}}})]),e._v(" "),n("div",{staticClass:"close pointer"},[n("img",{attrs:{src:i(2266),alt:""},on:{click:function(t){return e.close()}}})]),e._v(" "),n("div",{staticClass:"select"},[n("el-select",{staticStyle:{display:"block"},attrs:{placeholder:"请选择"},on:{change:e.modelSelect},model:{value:e.selectModelIndex,callback:function(t){e.selectModelIndex=t},expression:"selectModelIndex"}},e._l(e.models,(function(e,t){return n("el-option",{key:e.name,attrs:{label:e.name,value:t}})})),1)],1)]),e._v(" "),n("Tutorial",{model:{value:e.dialogVisible,callback:function(t){e.dialogVisible=t},expression:"dialogVisible"}})],1)},o=[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"logo"},[t("img",{attrs:{src:i(4427),alt:""}})])}];n._withStripped=!0;var a=i(1855),s=i(2516),l=i(3169),r=i.n(l),c=i(1012),d=i(7037),u=i(3458),m=i(1944),h=i(9401);const p={name:"Select",components:{Tutorial:i(6927).Z},data:function(){return{Scene:null,Renderer:null,Camera:null,Model:null,Lights:null,AnimationMixer:null,Tclock:new c.SUY,Controls:null,GridHelper:new c.VLJ(300,50,65298,16777215),modelNames:["“水波纹”彩陶豆","19世纪黑漆描金制茶贸易图茶叶罐","19世纪檀香木雕柳亭人物故事图盒","澳大利亚悉尼永安公司使用的油印机","彩花卉纹描金徽章碟","春秋时代方格纹双耳陶罐","广彩徽章广州风景长方盘","吕文成用过的高胡","木雕博古纹扶手椅（马来西亚霹雳中山会馆捐赠）","木雕筹码提箱（美国华侨使用）","清港口天后庙较合司码铁权","清广绣五伦图花梨框小座屏","清饕餮纹铜觚","清铁牛尊","商“∏”符号陶壶","收银机（美国华侨使用）","饕餮纹铜烛台","新石器时代划弦纹彩陶碗","战国时代素胎方格纹双系陶罐","家族为金开结婚时取字“圣权”的字架","林善永赠给美国三藩市亚摩那华埠关帝庙的花瓶","阮霭培家族使用的龙凤茶具","铸铁橡胶铰（挤出压片机）","座钟","玻璃花插"],models:[],showTip:!0,selectModelIndex:0,dialogVisible:!1,modelText:{title:"",subTitle:"这是一个古董"}}},methods:{close:function(){this.$message.success("关闭")},modelSelect:function(e){this.modelLoader(this.models[e])},init:function(){var e=this;return(0,s.Z)(r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.setScene(),e.setRenderer(),e.setCamera(),e.addControls(),e.addLight(),e.modelLoader(e.models[0]),e.animation();case 7:case"end":return t.stop()}}),t)})))()},setScene:function(){var e=new c.xsS;this.Scene=e},setRenderer:function(){var e=document.getElementById("container"),t=new c.CP7({antialias:!0,alpha:!0});t.setPixelRatio(window.devicePixelRatio),t.setSize(e.clientWidth,e.clientHeight),t.outputEncoding=c.knz,t.toneMapping=c.CdI,t.toneMappingExposure=1,this.Renderer=t,e.appendChild(t.domElement)},setCamera:function(){this.Camera=new c.cPb(45,window.innerWidth/window.innerHeight,1,1e4),this.Camera.position.set(0,0,50),this.Camera.lookAt(this.Scene.position)},modelLoader:function(e){var t=this,i=this.addLoadTip();this.Controls.autoRotate=!1,e.hdr&&this.HdrLoader(e.hdr);var n="",o=e.type||"glb";if(-1!="glb,gltf".indexOf(o))n=new h.E;else{if(-1=="fbx".indexOf(o))return void(i.textContent="请使用glb,gltf,fbx格式模型");n=new u.y}n.load(e.path,(function(n){var s;i.textContent="加载完成！",t.Model&&t.Scene.remove(t.Model),(s=t.Camera.position).set.apply(s,(0,a.Z)(e.position)),t.Model=-1!="fbx".indexOf(o)?n:n.scene,t.Model.traverse((function(e){e.isMesh&&(e.material.shininess=1,e.castShadow=!0,e.receiveShadow=!0,e.material.transparent=!0,e.material.opacity=1,"Model_2"!==e.name&&"transparent"!==e.material.name||(e.material.opacity=.3))})),t.setScaleToFitSize(t.Model),t.ModelAutoCenter(t.Model),t.Model.animations.length>0&&(t.AnimationMixer=new c.Xcj(t.Model),t.AnimationMixer.clipAction(t.Model.animations[0]).play()),t.Scene.add(t.Model),t.modelText.title=e.name,setTimeout((function(){i.style.display="none"}),1e3)}),(function(e){i.textContent="模型加载中..."}),(function(n){if(i.textContent="模型加载失败！1秒后重新加载",3!=t.loadingCount){if(n.message.includes("404: Not Found")){var o=e.path.split(".")[0];e.path="fbx"==e.type?o+".glb":o+".fbx",e.type="fbx"==e.type?"glb":"fbx",setTimeout((function(){t.loadingCount+=1,t.modelLoader(e)}),1e3)}}else i.textContent="模型加载失败，请检查文件！"}))},addLight:function(){var e=this;this.Lights=[{name:"AmbientLight",obj:new c.Mig(16777215,1.5)},{name:"DirectionalLight",obj:new c.Ox3(16777215,1),position:[80,100,50]}],this.Lights.map((function(t){var i;t.obj.name=t.name,t.position&&(i=t.obj.position).set.apply(i,(0,a.Z)(t.position)),t.Helper=new c.xG9(t.obj),e.Scene.add(t.obj)}))},HdrLoader:function(e){var t=this,i=new c.anP(this.Renderer);i.compileEquirectangularShader(),(new m.x).load(e,(function(e,n){var o=i.fromEquirectangular(e).texture;o.isPmremTexture=!0,i.dispose(),t.Scene.environment=o,t.Scene.background=o}))},addControls:function(){this.Controls=new d.z(this.Camera,this.Renderer.domElement),this.Controls.enableDamping=!0,this.Controls.enableZoom=!0,this.Controls.minDistance=2,this.Controls.maxDistance=10,this.Controls.enablePan=!1,this.Controls.dampingFactor=.5,this.Controls.autoRotate=!1,this.Controls.autoRotateSpeed=1},addLoadTip:function(){var e=document.getElementById("container");document.querySelector(".loadTip")&&e.removeChild(document.querySelector(".loadTip"));var t=document.createElement("div");return t.className="loadTip",t.style.cssText+="position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);border-radius:5px;background-color:rgba(0,0,0,0.5);padding:5px 10px;color:#fff;",e.appendChild(t),t},ModelAutoCenter:function(e){var t=new c.ZzF;t.expandByObject(e);var i=new c.Pa4;t.getCenter(i),e.position.x=e.position.x-i.x,e.position.y=e.position.y-i.y,e.position.z=e.position.z-i.z},animation:function(){var e=this;this.Renderer.render(this.Scene,this.Camera),this.Controls.update(),this.AnimationMixer&&this.AnimationMixer.update(this.Tclock.getDelta()),requestAnimationFrame((function(){return e.animation()}))},onWindowResize:function(){this.Camera.aspect=window.innerWidth/window.innerHeight,this.Camera.updateProjectionMatrix(),this.Renderer.setSize(window.innerWidth,window.innerHeight),this.Renderer.render(this.Scene,this.Camera)},getFitScaleValue:function(e){var t=new c.fQA(e);t.geometry.computeBoundingBox();var i=t.geometry.boundingBox,n=Math.max(i.max.x-i.min.x,i.max.y-i.min.y,i.max.z-i.min.z);return this.Camera.position.z/n},setScaleToFitSize:function(e){var t=.5*this.getFitScaleValue(e);return e.scale.set(t,t,t),t},modelAuto:function(){this.Controls.autoRotate=!this.Controls.autoRotate}},mounted:function(){var e=this;this.modelNames.forEach((function(t){e.models.push({name:t,path:"static/models/".concat(t,".fbx"),position:t.includes("碟")||t.includes("盘")?[0,2,5]:[0,0,5],type:"fbx"})})),this.init(),window.onresize=function(){return e.onWindowResize()}}};var f=(0,i(5471).Z)(p,n,o,!1,null,"43c48d96",null);f.options.__file="src/views/select.vue";const v=f.exports}}]);
//# sourceMappingURL=chunk-8b8858bf764f31b09571.js.map