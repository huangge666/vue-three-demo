"use strict";(self.webpackChunkmy_webpack_vue=self.webpackChunkmy_webpack_vue||[]).push([[147],{2418:(e,t,n)=>{n.r(t),n.d(t,{default:()=>v});var i=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{ref:"three",staticClass:"three-container",style:{filter:e.dialogVisible?"blur(10px)":""},attrs:{id:"container"}},[i("div",{staticClass:"title"},[i("div",{staticClass:"content"},[i("div",{staticClass:"_title"},[e._v(e._s(e.modelText.title))]),e._v(" "),e.showTip?e._e():i("div",[i("img",{staticClass:"pointer",attrs:{src:n(693),alt:""},on:{click:function(t){e.showTip=!0}}})]),e._v(" "),e.showTip?i("div",[i("div",{staticClass:"_sub-title"},[e._v(e._s(e.modelText.subTitle))]),e._v(" "),i("div",[i("img",{staticClass:"pointer",attrs:{src:n(9389),alt:""},on:{click:function(t){e.showTip=!1}}})])]):e._e()])]),e._v(" "),e._m(0),e._v(" "),i("div",{staticClass:"action"},[i("img",{staticClass:"auto-icon",attrs:{src:n(4828),alt:""},on:{click:function(t){return e.modelAuto()}}}),e._v(" "),i("img",{staticClass:"help-icon",attrs:{src:n(3421),alt:""},on:{click:function(t){e.dialogVisible=!0}}})]),e._v(" "),i("div",{staticClass:"close pointer"},[i("img",{attrs:{src:n(2266),alt:""},on:{click:function(t){return e.close()}}})])]),e._v(" "),i("Tutorial",{model:{value:e.dialogVisible,callback:function(t){e.dialogVisible=t},expression:"dialogVisible"}})],1)},o=[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"logo"},[t("img",{attrs:{src:n(4427),alt:""}})])}];i._withStripped=!0;var a=n(1855),s=n(2516),r=n(3169),l=n.n(r);function c(e,t){if(!(t=t||window.location.search.substr(1)||window.location.hash.split("?")[1]))return null;var n=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),i=t.match(n);return null!=i?unescape(i[2]):null}var d=n(1012),u=n(7037),m=n(3458),h=n(1944),p=n(9401);const f={name:"Home",components:{Tutorial:n(6927).Z},data:function(){return{Scene:null,Renderer:null,Camera:null,Model:null,Lights:null,AnimationMixer:null,Tclock:new d.SUY,Controls:null,GridHelper:new d.VLJ(300,50,65298,16777215),modelNames:["“水波纹”彩陶豆","19世纪黑漆描金制茶贸易图茶叶罐","19世纪檀香木雕柳亭人物故事图盒","澳大利亚悉尼永安公司使用的油印机","彩花卉纹描金徽章碟","春秋时代方格纹双耳陶罐","广彩徽章广州风景长方盘","吕文成用过的高胡","木雕博古纹扶手椅（马来西亚霹雳中山会馆捐赠）","木雕筹码提箱（美国华侨使用）","清港口天后庙较合司码铁权","清广绣五伦图花梨框小座屏","清饕餮纹铜觚","清铁牛尊","商“∏”符号陶壶","收银机（美国华侨使用）","饕餮纹铜烛台","新石器时代划弦纹彩陶碗","战国时代素胎方格纹双系陶罐","家族为金开结婚时取字“圣权”的字架","林善永赠给美国三藩市亚摩那华埠关帝庙的花瓶","阮霭培家族使用的龙凤茶具","铸铁橡胶铰（挤出压片机）","座钟"],models:[],showTip:!0,selectModelIndex:0,dialogVisible:!1,modelText:{title:"",subTitle:"这是一个古董"},loadingCount:0}},methods:{getDataInfo:function(){return(0,s.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},randomModel:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=(0,a.Z)(this.models),i=c("index");if(i&&!t||(i=Math.floor(Math.random()*n.length-1)),i>=n.length){this.$message.warning("index不能超过".concat(n.length-1,"，2秒后将进行随机展示某个物品"));var o=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});setTimeout((function(){o.close(),e.randomModel(!0)}),2e3)}else this.modelLoader(n[i])},close:function(){this.$message.success("关闭")},init:function(){var e=this;return(0,s.Z)(l().mark((function t(){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.setScene(),e.setRenderer(),e.setCamera(),e.addControls(),e.addLight(),e.randomModel(),e.animation();case 7:case"end":return t.stop()}}),t)})))()},setScene:function(){var e=new d.xsS;this.Scene=e},setRenderer:function(){var e=document.getElementById("container"),t=new d.CP7({antialias:!0,alpha:!0});t.setPixelRatio(window.devicePixelRatio),t.setSize(e.clientWidth,e.clientHeight),t.outputEncoding=d.knz,t.toneMapping=d.CdI,t.toneMappingExposure=1,this.Renderer=t,e.appendChild(t.domElement)},setCamera:function(){this.Camera=new d.cPb(45,window.innerWidth/window.innerHeight,1,1e4),this.Camera.position.set(0,0,50),this.Camera.lookAt(this.Scene.position)},modelLoader:function(e){var t=this,n=this.addLoadTip();this.Controls.autoRotate=!1,e.hdr&&this.HdrLoader(e.hdr);var i="",o=e.type||"glb";if(-1!="glb,gltf".indexOf(o))i=new p.E;else{if(-1=="fbx".indexOf(o))return void(n.textContent="请使用glb,gltf,fbx格式模型");i=new m.y}i.load(e.path,(function(i){var s;n.textContent="加载完成！",t.Model&&t.Scene.remove(t.Model),(s=t.Camera.position).set.apply(s,(0,a.Z)(e.position)),t.Model=-1!="fbx".indexOf(o)?i:i.scene,t.Model.traverse((function(e){e.isMesh&&(e.material.shininess=1,e.castShadow=!0,e.receiveShadow=!0,e.material.transparent=!0,e.material.opacity=1,"Model_2"!==e.name&&"transparent"!==e.material.name||(e.material.opacity=.3))})),t.setScaleToFitSize(t.Model),t.ModelAutoCenter(t.Model),t.Model.animations.length>0&&(t.AnimationMixer=new d.Xcj(t.Model),t.AnimationMixer.clipAction(t.Model.animations[0]).play()),t.Scene.add(t.Model),t.modelText.title=e.name,setTimeout((function(){n.style.display="none"}),1e3)}),(function(e){n.textContent="模型加载中..."}),(function(i){if(n.textContent="模型加载失败！1秒后重新加载",3!=t.loadingCount){if(i.message.includes("404: Not Found")){var o=e.path.split(".")[0];e.path="fbx"==e.type?o+".glb":o+".fbx",e.type="fbx"==e.type?"glb":"fbx",setTimeout((function(){t.loadingCount+=1,t.modelLoader(e)}),1e3)}}else n.textContent="模型加载失败，请检查文件！"}))},addLight:function(){var e=this;this.Lights=[{name:"AmbientLight",obj:new d.Mig(16777215,.7)},{name:"DirectionalLight",obj:new d.Ox3(16777215,1),position:[80,100,50]},{name:"DirectionalLightTop",obj:new d.Ox3(16777215,1),position:[0,15,0]}],this.Lights.map((function(t){var n;t.obj.name=t.name,t.position&&(n=t.obj.position).set.apply(n,(0,a.Z)(t.position)),t.Helper=new d.xG9(t.obj),e.Scene.add(t.obj)}))},HdrLoader:function(e){var t=this,n=new d.anP(this.Renderer);n.compileEquirectangularShader(),(new h.x).load(e,(function(e,i){var o=n.fromEquirectangular(e).texture;o.isPmremTexture=!0,n.dispose(),t.Scene.environment=o,t.Scene.background=o}))},addControls:function(){this.Controls=new u.z(this.Camera,this.Renderer.domElement),this.Controls.enableDamping=!0,this.Controls.enableZoom=!0,this.Controls.minDistance=2,this.Controls.maxDistance=10,this.Controls.enablePan=!1,this.Controls.dampingFactor=.5,this.Controls.autoRotate=!1,this.Controls.autoRotateSpeed=1},addLoadTip:function(){var e=document.getElementById("container");document.querySelector(".loadTip")&&e.removeChild(document.querySelector(".loadTip"));var t=document.createElement("div");return t.className="loadTip",t.style.cssText+="position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);border-radius:5px;background-color:rgba(0,0,0,0.5);padding:5px 10px;color:#fff;",e.appendChild(t),t},ModelAutoCenter:function(e){var t=new d.ZzF;t.expandByObject(e);var n=new d.Pa4;t.getCenter(n),e.position.x=e.position.x-n.x,e.position.y=e.position.y-n.y,e.position.z=e.position.z-n.z},animation:function(){var e=this;this.Renderer.render(this.Scene,this.Camera),this.Controls.update(),this.AnimationMixer&&this.AnimationMixer.update(this.Tclock.getDelta()),requestAnimationFrame((function(){return e.animation()}))},onWindowResize:function(){this.Camera.aspect=window.innerWidth/window.innerHeight,this.Camera.updateProjectionMatrix(),this.Renderer.setSize(window.innerWidth,window.innerHeight),this.Renderer.render(this.Scene,this.Camera)},getFitScaleValue:function(e){var t=new d.fQA(e);t.geometry.computeBoundingBox();var n=t.geometry.boundingBox,i=Math.max(n.max.x-n.min.x,n.max.y-n.min.y,n.max.z-n.min.z);return this.Camera.position.z/i},setScaleToFitSize:function(e){var t=.42*this.getFitScaleValue(e);return e.scale.set(t,t,t),t},modelAuto:function(){this.Controls.autoRotate=!this.Controls.autoRotate}},watch:{$route:{handler:function(e,t){e.query.index&&this.randomModel()},deep:!0}},mounted:function(){var e=this;this.modelNames.forEach((function(t){e.models.push({name:t,path:"static/models/".concat(t,".glb"),position:t.includes("碟")||t.includes("盘")?[0,2,5]:[0,0,5],type:"glb"})})),this.models.push({name:"玻璃花插",path:"static/models/玻璃花插.glb",position:[0,0,5],type:"glb"}),this.init(),window.onresize=function(){return e.onWindowResize()}}};var g=(0,n(5471).Z)(f,i,o,!1,null,"fae5bece",null);g.options.__file="src/views/Home.vue";const v=g.exports}}]);
//# sourceMappingURL=chunk-34310e3b6f44a0abc9ca.js.map